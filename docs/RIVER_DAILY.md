# River Daily Content (Server Workflow)

This repo can receive daily drafts generated by River on the server.

**Generator script**
- `/home/mumega/mirror/river_frc_daily_content.py`

**Systemd units**
- `/etc/systemd/system/river-frc-daily.service`
- `/etc/systemd/system/river-frc-daily.timer`

## What it does
- Generates **one** draft per day (rotates `blog → topic → article`) and writes it into:
  - `content/inbox/en/{blog|topics|articles}/...`
- Runs `npm run content:audit` after writing.

## Optional modes (env vars on the service)
- `RIVER_FRC_APPLY=1`: run `node scripts/process-inbox.js` to move inbox drafts into `content/en/...`
  - `RIVER_FRC_USE_SOS=1`: uses SOS digestion when applying (requires a working SOS `/chat` endpoint)
- `RIVER_FRC_AUTOPUBLISH=1`: commit + push to `RIVER_FRC_PUBLISH_BRANCH` (default `v2-foundation`)

## Useful commands
- Run once now: `sudo systemctl start river-frc-daily.service`
- Watch logs: `sudo tail -n 200 /var/log/river/frc-daily.log`
- Next run time: `sudo systemctl list-timers --no-pager | rg river-frc-daily`

